name: Donelist generate
on:
  pull_request:
    branches: [ master ]

jobs:
  donelist_generate:
    name: Log release history
    runs-on: ubuntu-latest
    steps:

    # Repo code checkout required if `template` is used
    - name: Checkout
      uses: actions/checkout@v2

    # https://stackoverflow.com/a/60942437
    - name: Get current date
      id: date
      run: echo "::set-output name=date::$(date +'%Y/%m/%d')"

    - name: Schedule Issue
      uses: imjohnbo/issue-bot@v2.3
      with:
        title: Release - ${{ steps.date.outputs.date }}
        assignees: "tanaka-yohei" # Github Account name without @.
        labels: "Test"
        pinned: false
        close-previous: true
        template: ".github/ISSUE_TEMPLATE/generate_donelist.md"
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
